<div class="main-container">

<div class="sock-container">
  <div class="row images">
    <% if @sock.photo? %>
    <%= cl_image_tag @sock.photo, height: 180, width: 280, crop: :fill, class: "col-xs-12, col-sm-6", alt: "no image" %>
    <% else %>
    <%= image_tag "logo.jpg", height: 180, width: 280, crop: :fill, class: "col-xs-12, col-sm-6", alt: "no image" %>
    <% end %>
  </div>
  <p class="filter">Categories</p>
  <div class="overview-categories">
    <div class="categories">
    <div class="category">
      <i class="fas fa-palette"></i>
      <%= @sock.color %>
    </div>
    <div class="category">
      <i class="fas fa-hashtag"></i>
      <%= @sock.pattern %>
      </div>
    <div class="category">
      <i class="fas fa-cloud-sun"></i>
      <%= @sock.season %>
    </div>
    </div>
  <div class="categories">
    <div class="category">
      <i class="fas fa-cloud-sun"></i>
      <%= @sock.size %>
    </div>
    <div class="category">
      <i class="fas fa-cloud-sun"></i>
      <%= @sock.sock_type %>
    </div>
    <div class="category">
      <i class="fas fa-cloud-sun"></i>
      <%= @sock.brand %>
    </div>
  </div>
</div>
  <div class="sock">
    <p><%= @user.username %></p>
    <h1><%= @sock.title %></h1>
    <h2><%= @sock.price %></h2>
    <p class="desc"> <%= @sock.description %></p>
    <div class="buttons">
      <% if @sock.user == current_user %>
      <% if policy(@sock).edit? %>
      <div class="logged-in-user d-flex">
        <div id="update-button">
          <i class="fas fa-pen"></i>
          <%= link_to "Edit", edit_sock_path %>
        </div>
        <% end %>
        <% if policy(@sock).destroy? %>
        <div id="delete-button">
          <i class="far fa-trash-alt"></i>
          <%= link_to "Delete", sock_path(@sock),id:"delete-button", method: :delete,
          data: { confirm: "Are you sure?" } %>
        </div>
      </div>
      <% end %>
      <% else %>
      <%= link_to "Buy this sock", new_sock_transaction_path(@sock), id:"add" %>
      <% end %>
    </div>
  </div>
</div>

  <div class="sock-container">
  <div
  id="map"
  style="width: 100%;
  height: 600px;"
  data-markers="<%= @markers.to_json %>"
  data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>"
></div>
  </div>
</div>

<div class="review-container">
  <div class="reviews">
    <h2>About <%= @user.username %></h2>
    <div class="overall-rating">
      <% if @user.rating != "no reviews yet" && !@user.rating.nil? %>
        <p><strong>User Rating: </strong></p>
        <div class="stars">
          <% @user.rating.times do%>
            <% raw '<i class="fa fa-star" aria-hidden="true"></i>' %>
          <% end %>

          </div>
          </div>
          <div class="sock-review">
            <p><strong>User Reviews</strong></p>
            <% @user.reviews.each_with_index do |review,index| %>
            <%reviewer = User.find(@ids[index]) %>
           <p class ="d-flex"><strong><%= reviewer.username %></strong>
           <div class="review-rating">
              <%review.rating.times do %>
              <%# raw '<i class="fa fa-star" aria-hidden="true"></i>' %>
              <%= '⭐️' %>
            <% end %>
            </p>
            </div>
            <div class="review-content">
              <p><%= review.description %></p>
            </div>
    
            <% end %>
          </div>
          <div class="review-content">
            <p><%= review.description %></p>
          </div>
        <% end %>
      <% else %>
        <%= @user.rating %>
        <p>No Reviews yet</p>
      <% end %>
    </div>
    <div id="review-button">
      <i class="fas fa-edit"></i>
        <%= link_to "Add a review", new_review_path %>
    </div>
  </div>
</div>



>>>>>